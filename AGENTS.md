# AGENTS.md

## 言語

- すべて日本語で回答する

## 現在フェーズ

- フェーズは「企画」
- 実装コードの作成、依存追加、ビルド/テスト実行は行わない
- 企画に必要なドキュメント整備と意思決定支援のみ実施する

## 進行ルール（Codex Desktop向け）

- 変更は小さく分け、目的を先に明記する
- 不明点は推測で埋めず、`前提` と `未決事項` を分けて記載する
- 企画判断は `plan/意思決定ログ.md` に記録する
- 新規タスクは `plan/バックログ.md` に追加する
- リスクは `plan/リスク登録簿.md` に追加または更新する

## 並列セッション運用ルール

- セッションはIssue単位で分離し、1セッション1論点を維持する
- ブランチは `codex/issue-<番号>` 形式で作成する
- 並列作業時は `git worktree` で作業ディレクトリを分離する
- 共有台帳（`plan/意思決定ログ.md` / `plan/バックログ.md` / `plan/リスク登録簿.md`）の更新担当を事前に決める
- 台帳更新は `pull/rebase -> 追記 -> push` を短サイクルで実施し、競合を最小化する
- 台帳を更新したセッションは、同日中に他セッションへ更新要点（更新ファイル・ID・要約）を共有する
- GitHub操作（PR作成/更新、Issueコメント、PR close）は `multi-agent-orchestrator-bot`（GitHub App）を標準主体とする
- `gh` のデフォルトユーザー認証を常用しない。`installation token` を都度発行し、`GH_TOKEN` 指定で実行する
- 人アカウントでのGitHub書き込みは非常時のみ許可し、理由を `plan/意思決定ログ.md` に記録する

## 個人xマルチエージェント最適化ルール

- 個人運用では `running` 同時Issueを最大2件に制限する
- 24時間超の `blocked` がある場合、新規 `agent:queued` を停止し復帰判断を優先する
- プランニング開始時は `plan/templates/個人xマルチエージェント_TaskBriefテンプレート.md` を使って `Goal/Non-goals/Acceptance/Constraints/How to Test` を先に固定する
- セッション開始時に `目的/制約/終了条件` を明記する
- PRレビュー前は `plan/templates/個人xマルチエージェント_PRチェックリスト.md` の全項目を確認する
- 起動時コンテキストファイル（`AGENTS.md` / `.github/instructions` / `.github/agents`）を更新した場合は `plan/specs/21_起動時コンテキストファイル運用仕様.md` に従って台帳へ反映する
- セッション終了時は必ず `結論/根拠/未決事項/次アクション` で記録する
- 日次で `run_id`・`app_slug`・例外ラベル4項目・判定語彙整合を確認する
- 日次レビューには `plan/templates/個人xマルチエージェント_日次レビュー.md` を使用する

## 企画タスクの出力フォーマット

- `結論`: 今回決めたこと
- `根拠`: そう判断した理由
- `未決事項`: 次に決めるべきこと
- `次アクション`: 担当と期限

## 禁止事項

- 既存の意思決定を無断で削除しない
- セキュリティ優先順位（A:漏えい防止 > B:ホスト保護 > C:課金回避）を崩さない
