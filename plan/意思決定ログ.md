# 意思決定ログ（ADR簡易版）

## ADR-001: 企画フェーズでは実装を開始しない

- 日付: 2026-02-10
- 状態: accepted
- 文脈: 企画段階で仕様ブレを抑えたい
- 決定: 企画完了条件を満たすまで、実装コード作成を行わない
- 影響: ドキュメント作業が先行し、初速は遅くなるが再作業を減らせる
- 次回見直し: M4（開発着手判定）時

## ADR-002: v0.2の成果物受け渡しは方式A（コンテナ非push）を採用する

- 日付: 2026-02-10
- 状態: accepted
- 文脈: セキュリティ優先順位A（漏えい防止）を最優先し、コンテナ側にGitHub書き込み権限を持たせない運用が必要
- 決定: コンテナは `git diff`/パッチとテスト結果のみを出力し、ホスト側でコミット・PR作成を行う
- 代替案: コンテナから直接push/PR作成を行う方式
- 影響: トークン露出リスクを低減できる一方、ホスト側に成果物完全性検証の設計タスクが発生する
- 次回見直し: M2（実行アーキテクチャ方針の確定）時

## ADR-003: policy例外ラベルは期限付き・理由必須で運用する

- 日付: 2026-02-10
- 状態: accepted
- 文脈: `policy:cloud-llm=allow` などの例外を無制限に使うと、A（漏えい防止）を実運用で崩す恐れがある
- 決定: 例外ラベルは「理由・適用範囲・失効日」の3点が揃った場合のみ有効とし、欠ける場合は deny 扱いにする
- 代替案: ラベル付与のみで例外を許可する簡易運用
- 影響: 運用の手間は増えるが、例外の監査可能性と濫用抑止が向上する
- 次回見直し: M3（運用・安全ガードレール確定）時

## ADR-004: 動的並列制御は段階制御（0/1/2）で開始する

- 日付: 2026-02-10
- 状態: proposed
- 文脈: 「固定並列数を避ける」方針はあるが、閾値と復帰条件が未定義のため運用で不安定化する
- 決定: v0.2は同時Run上限を段階制御（停止=0/抑制=1/通常=2）で開始し、閾値は計測結果で確定する
- 代替案: 並列数を固定値で運用し続ける
- 影響: 初期運用の安全性は高まるが、閾値調整と監視指標定義の追加検討が必須になる
- 次回見直し: M2（実行アーキテクチャ方針の確定）時

## ADR-005: v0.2の想定実行環境はApple Mac Studio M3 Ultra（メモリ512GB）とする

- 日付: 2026-02-10
- 状態: accepted
- 文脈: リソース制限値、動的並列制御、運用指標の初期チューニング基準を固定する必要がある
- 決定: v0.2の標準実行環境を Apple Mac Studio（M3 Ultra / 512GB）に統一する
- 代替案: ハードウェアを固定せず、環境差を吸収する抽象方針のみで運用する
- 影響: 初期設計と運用基準が明確になる一方、他環境へ展開時は再チューニングが必要
- 次回見直し: M2（実行アーキテクチャ方針の確定）時

## ADRテンプレート

- ID: ADR-XXX
- 日付: YYYY-MM-DD
- 状態: proposed / accepted / rejected / superseded
- 文脈:
- 決定:
- 代替案:
- 影響:
- 次回見直し:
