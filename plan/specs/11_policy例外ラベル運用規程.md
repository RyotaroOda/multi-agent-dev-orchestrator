# policy例外ラベル運用規程 v0.2-draft

## 1. 目的

例外ラベルの濫用を防ぎ、監査可能な最小運用を定義する。

## 2. 対象ラベル

- `policy:cloud-llm=allow`
- `policy:allow-test-change`
- `policy:allow-ci-change`

## 3. 適用前チェック（必須）

例外は以下4項目が揃った場合のみ有効。

1. 理由
2. 適用範囲（Issue/Stage/対象）
3. 失効日（YYYY-MM-DD）
4. 承認者

いずれか欠落時は deny 扱い。

## 4. 運用フロー

1. 申請者が Issue コメントで例外申請
2. 承認者がコメントで承認（承認者名・承認理由・失効日を記載）
3. ラベル付与後に Run 実行
4. Run 終了時に結果レビューをコメント
5. 失効日到達またはRun完了でラベル削除

## 5. 事後追認ルール

- `policy:allow-test-change` / `policy:allow-ci-change` は24時間以内に事後追認コメントを必須とする。
- 追認未実施は監査違反として次回Runを `blocked` にする。

## 6. 監査ログ項目

- `run_id`
- 例外ラベル名
- 申請者
- 承認者
- 理由
- 適用範囲
- 失効日
- 実行結果（pass/blocked）

## 7. 失効ルール

- 失効日を過ぎた例外ラベルは自動無効。
- 失効判定エラー時は fail-closed（deny）を適用。

## 8. 申請テンプレート

```md
## 例外申請
- ラベル:
- 理由:
- 適用範囲:
- 失効日:
- 申請者:
```

## 9. 承認テンプレート

```md
## 例外承認
- ラベル:
- 承認可否: approve / reject
- 承認理由:
- 失効日:
- 承認者:
```

## 10. 受け入れ条件

- 例外ラベルの運用テンプレートが存在する
- 理由/適用範囲/失効日/承認者なしでは例外が通らない
- 例外履歴を `run_id` 単位で追跡できる

## 11. 未決事項

- なし（v0.2範囲で確定済み）。
